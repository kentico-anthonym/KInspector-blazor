@page "/reports"
@using KInspector.Core.Services.Interfaces
@inherits LayoutComponentBase
@inject IModuleService moduleService
@inject IConfigService configService
@inject IJSRuntime js

<PageTitle>Reports</PageTitle>

@{
    var currentInstance = configService.GetCurrentInstance();
    if (currentInstance is null)
    {
        throw new InvalidOperationException("An instance must be connected.");
    }

    var reports = moduleService.GetReports();
}

<section class="w-full h-full py-8 px-4 mx-auto lg:py-16 lg:px-6 space-y-8 lg:space-y-0 scrollbar overflow-auto">
        <div id="accordion-flush" data-accordion="collapse" data-active-classes="bg-white dark:bg-gray-900 text-gray-900 dark:text-white" data-inactive-classes="text-gray-500 dark:text-gray-400">
            @foreach (var report in reports)
            {
                <ReportCard Report="@report" />
            }
        </div>
</section>

@code {
    protected override async Task OnAfterRenderAsync(bool isFirstRender)
    {
        if (isFirstRender)
        {
            await js.InvokeVoidAsync("window.initializeFlowbite");
        }
    }
}
